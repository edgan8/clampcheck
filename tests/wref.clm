let open = fun u -U> @lunit in
let close = fun f -U> @ldispose f in
let read = fun f -U> (1,f) in

let runParallel = fun f -U> fun x -L>
  (f x, f x) in
let fref = wnew (open unit) in
let proc = fun u -R> 
  match release fref with
    inl f -> close f
  | inr dummy -> dummy
  in
runParallel proc unit
